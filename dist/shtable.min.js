!function(a,b){a.fn.shtable=function(b){var c=this,d=a.extend({styleContainer:"head",offsetTop:0,offsetBottom:0,horizontalScrollHeight:15,depth:1,horizontalHead:!0,combinationHead:!0,verticalHead:!1,horizontalScroll:!0,mainContainerClasses:"",mainWrapClasses:"",mainTableInnerClasses:"",mainTableWrapClasses:"",horizontalHeadContainerClasses:"",horizontalHeadTableWrapClasses:"",horizontalHeadTableClasses:"",combinationHeadContainerClasses:"",combinationHeadTableWrapClasses:"",combinationHeadTableClasses:"",verticalHeadContainerClasses:"",verticalHeadTableWrapClasses:"",verticalHeadTableClasses:"",horizontalScrollContainerClasses:"",horizontalScrollContentClasses:""},b),e={};return e.targetsStorage=function(){function b(b){c.$this=a(b),c.$defaultTable=c.$this,c.$defaultTableDefaultParent=c.$this.parent()}var c={$window:a(window),$document:a(document),$this:null,$defaultTable:null,$defaultTableDefaultParent:null};return{init:function(a){b(a)},foundTargets:c}}(),e.factory=function(){function a(){this.listeners=[],this.addListener=function(a){this.listeners.push(a)},this.fire=function(a){for(var b=this.listeners.length,c=0;c<b;c++)"function"==typeof this.listeners[c]&&this.listeners[c](a)}}return{createObserver:function(){return new a}}}(),e.helpers=function(){function a(){return Date.now?Date.now():(new Date).getTime()}function b(b,c,d){var e,f,g,h,i,j=function(){var k=a()-h;k<c&&k>=0?e=setTimeout(j,c-k):(e=null,d||(i=b.apply(g,f),e||(g=f=null)))};return function(){g=this,f=arguments,h=a();var k=d&&!e;return e||(e=setTimeout(j,c)),k&&(i=b.apply(g,f),g=f=null),i}}return{debounce:function(a,c,d){return b(a,c,d)}}}(),e.eventManager=function(a,b){function c(){e()}function d(){h(),i()}function e(){n.$window.resize(b.helpers.debounce(g,16)),n.$window.on("scroll",b.helpers.debounce(h,8)),n.$mainWrap.on("scroll",b.helpers.debounce(i,8))}function f(){h(null,!0),i(null,!0)}function g(){f(),j("resize",{})}function h(b,c){var d=n.$window.height(),e=n.$document.scrollTop(),f=n.$defaultTable.offset().top,g=n.$defaultTable.height();(m.lastScrollTop!==e||c)&&(m.lastScrollTop=e,j("verticalScroll",{offsetTop:f-e-a.offsetTop,offsetBottom:d+e-a.offsetBottom-(f+g)}))}function i(a,b){var c=n.$mainWrap.scrollLeft();(m.lastScrollLeft!==c||b)&&(m.lastScrollLeft=c,j("horizontalScroll",{scrollLeft:c}))}function j(a,b){l[a]&&l[a].fire(b)}function k(a,b){l[a]&&l[a].addListener(b)}var l={resize:b.factory.createObserver(),verticalScroll:b.factory.createObserver(),horizontalScroll:b.factory.createObserver()},m={lastScrollLeft:-1,lastScrollTop:-1},n=b.targetsStorage.foundTargets;return{init:function(){c()},emitLiteEvents:function(){d()},emitMissEvents:function(){f()},addListener:function(a,b){k(a,b)}}}(d,e),e.main=function(b,c){function d(){f(),g(),h(),e(),i()}function e(){c.horizontalHead.addListener("renderedView",function(a){q.horizontalHead.view=a,i("horizontalHead","view")}),c.horizontalHead.addListener("renderedStyle",function(a){q.horizontalHead.style=a,i("horizontalHead","style")}),c.combinationHead.addListener("renderedView",function(a){q.combinationHead.view=a,i("combinationHead","view")}),c.combinationHead.addListener("renderedStyle",function(a){q.combinationHead.style=a,i("combinationHead","style")}),c.verticalHead.addListener("renderedView",function(a){q.verticalHead.view=a,i("verticalHead","view")}),c.verticalHead.addListener("renderedStyle",function(a){q.verticalHead.style=a,i("verticalHead","style")}),c.horizontalScroll.addListener("renderedView",function(a){q.horizontalScroll.view=a,i("horizontalScroll","view")}),c.horizontalScroll.addListener("renderedStyle",function(a){q.horizontalScroll.style=a,i("horizontalScroll","style")})}function f(){q.main.view=j(),q.main.style=k()}function g(){r.$defaultTable.css("margin","0 !important"),r.$defaultTableDefaultParent.css("overflow","hidden"),r.$styleContainer=a('<style id="shtable-style"></style>'),r.$document.find(b.styleContainer).append(r.$styleContainer)}function h(){r.$mainContainer=q.main.view,r.$mainWrap=q.main.view.find(".shtable__main-wrap"),r.$mainTableInner=q.main.view.find(".shtable__main-table-inner"),r.$mainTableWrap=q.main.view.find(".shtable__main-table-wrap")}function i(a,b){o&&(r.$defaultTableDefaultParent.append(q.main.view),r.$mainTableWrap.append(r.$defaultTable),o=!1),a&&"view"===b&&("horizontalHead"===a&&(r.$mainTableInner.find(".shtable__horizontal-head-container").remove(),r.$mainTableInner.append(q.horizontalHead.view)),"combinationHead"===a&&(r.$mainContainer.find(".shtable__combination-head-container").remove(),r.$mainContainer.append(q.combinationHead.view)),"verticalHead"===a&&(r.$mainContainer.find(".shtable__vertical-head-container").remove(),r.$mainContainer.append(q.verticalHead.view)),"horizontalScroll"===a&&(r.$mainContainer.find(".shtable__horizontal-scroll-container").remove(),r.$mainContainer.append(q.horizontalScroll.view))),r.$styleContainer.html([q.main.style,q.horizontalHead.style,q.combinationHead.style,q.verticalHead.style,q.horizontalScroll.style].join(""))}function j(){var c=n.main.join(""),d=0,e=m.length;for(d=0;d<e;d++)c=c.replace("{"+m[d]+"}",b[m[d]]?b[m[d]]:"");return a(c)}function k(){return[".shtable__main-container {","  position: relative;","  overflow: visible;","  display: block;","  width: 100%;","}",".shtable__main-wrap {","  position: relative;","  overflow: hidden;","  overflow-x: auto;","}",".shtable__main-table-inner {","  position: relative;","  overflow: visible;","  display: inline-block;","  width: auto;","}",".shtable__main-table-wrap {","  position: relative;","  overflow: visible;","  display: inline-block;","  width: auto;","}"].join("")}function l(a,b){p[a]&&p[a].addListener(b)}var m,n,o=!0,p={renderedView:c.factory.createObserver(),renderedStyle:c.factory.createObserver()},q={main:{view:null,style:null},horizontalHead:{view:null,style:null},combinationHead:{view:null,style:null},verticalHead:{view:null,style:null},horizontalScroll:{view:null,style:null}},r=c.targetsStorage.foundTargets;return m=["mainContainerClasses","mainWrapClasses","mainTableInnerClasses","mainTableWrapClasses"],n={main:['<div class="shtable__main-container {mainContainerClasses}">','  <div class="shtable__main-wrap {mainWrapClasses}">','    <div class="shtable__main-table-inner {mainTableInnerClasses}">','      <div class="shtable__main-table-wrap {mainTableWrapClasses}">',"      </div>","    </div>","  </div>","</div>"]},{init:function(){d()},addListener:function(a,b){l(a,b)}}}(d,e),e.horizontalHead=function(b,c){function d(){g(),h(),f(),j(),e()}function e(){l("renderedView",q.view),l("renderedStyle",q.style)}function f(){c.eventManager.addListener("verticalScroll",function(a){var c=s.$defaultTable.width(),d=s.$defaultTableDefaultParent.width();r.offsetTop=a.offsetTop,r.offsetBottom=a.offsetBottom,r.offsetTop<=0?(s.$horizontalHeadContainer.css("width",d).css("top",b.offsetTop).addClass("shtable__horizontal-head-container--fixed"),s.$horizontalHeadTableWrap.css("width",c)):(s.$horizontalHeadContainer.css("width",c).css("top",0).removeClass("shtable__horizontal-head-container--fixed"),s.$horizontalHeadTableWrap.css("width",c))}),c.eventManager.addListener("horizontalScroll",function(a){r.scrollLeft=a.scrollLeft,s.$horizontalHeadTableWrap.css("left",-1*r.scrollLeft)})}function g(){q.view=i(),q.style=k()}function h(){s.$horizontalHeadContainer=q.view,s.$horizontalHeadTableWrap=q.view.find(".shtable__horizontal-head-table-wrap"),s.$horizontalHeadTable=q.view.find(".shtable__horizontal-head-table")}function i(){var c=o.main.join(""),d=0,e=n.length;for(d=0;d<e;d++)c=c.replace("{"+n[d]+"}",b[n[d]]?b[n[d]]:"");return a(c)}function j(){var c=[],d=s.$defaultTable.find("thead th"),e=s.$defaultTable.width(),f=s.$defaultTableDefaultParent.width();s.$horizontalHeadTable.append(s.$defaultTable.find("thead").clone()),c=s.$horizontalHeadTable.find("thead th"),d.length&&d.each(function(b,d){a(c[b]).attr("width",a(d).outerWidth())}),r.offsetTop<=0?(s.$horizontalHeadContainer.css("width",f).css("top",b.offsetTop).addClass("shtable__horizontal-head-container--fixed"),s.$horizontalHeadTableWrap.css("width",e)):(s.$horizontalHeadContainer.css("width",e).css("top",0).removeClass("shtable__horizontal-head-container--fixed"),s.$horizontalHeadTableWrap.css("width",e)),s.$horizontalHeadTableWrap.css("left",-1*r.scrollLeft)}function k(){return[".shtable__horizontal-head-container {","  overflow: hidden;","  max-width: none;","  position: absolute;","  top: 0;","  background: #FCFCFC;","  z-index: 1000;","  display: block;","  background: #ffffff;","}",".shtable__horizontal-head-container--fixed {","  position: fixed;","  -webkit-box-shadow: 0 3px 4px -3px rgba(0, 0, 0, 0.45);","  -moz-box-shadow: 0 3px 4px -3px rgba(0, 0, 0, 0.45);","  box-shadow: 0 3px 4px -3px rgba(0, 0, 0, 0.45);","}",".shtable__horizontal-head-table-wrap {","  position: static;","}",".shtable__horizontal-head-container--fixed .shtable__horizontal-head-table-wrap {","  position: relative;","}","table.shtable__horizontal-head-table {","  table-layout: fixed;","  margin: 0 !important;","  margin-bottom: 0 !important;","}"].join("")}function l(a,b){p[a]&&p[a].fire(b)}function m(a,b){p[a]&&p[a].addListener(b)}var n,o,p={renderedView:c.factory.createObserver(),renderedStyle:c.factory.createObserver()},q={view:null,style:null},r={offsetTop:1,offsetBottom:-1,scrollLeft:0},s=c.targetsStorage.foundTargets;return n=["horizontalHeadContainerClasses","horizontalHeadTableWrapClasses","horizontalHeadTableClasses"],o={main:['<div class="shtable__horizontal-head-container {horizontalHeadContainerClasses}">','  <div class="shtable__horizontal-head-table-wrap {horizontalHeadTableWrapClasses}">','    <table class="shtable__horizontal-head-table {horizontalHeadTableClasses}"></table>',"  </div>","</div>"]},{init:function(){d()},addListener:function(a,b){m(a,b)}}}(d,e),e.combinationHead=function(){function b(){i(),f(),h(),j(),c()}function c(){l("renderedView",q.view),l("renderedStyle",q.style)}function f(){s.$combinationHeadContainer=q.view,s.$combinationHeadTableWrap=q.view.find(".shtable__combination-head-table-wrap"),s.$combinationHeadTable=q.view.find(".shtable__combination-head-table")}function g(){var b=o.main.join(""),c=0,e=n.length;for(c=0;c<e;c++)b=b.replace("{"+n[c]+"}",d[n[c]]?d[n[c]]:"");return a(b)}function h(){e.eventManager.addListener("verticalScroll",function(a){r.offsetTop=a.offsetTop,r.offsetBottom=a.offsetBottom,r.offsetTop<0?(s.$combinationHeadContainer.removeClass("shtable__combination-head-container--absolute"),s.$combinationHeadContainer.css("top",d.offsetTop).addClass("shtable__combination-head-container--fixed")):(s.$combinationHeadContainer.removeClass("shtable__combination-head-container--fixed"),s.$combinationHeadContainer.css("top",0).addClass("shtable__combination-head-container--absolute"))}),e.eventManager.addListener("horizontalScroll",function(a){r.scrollLeft=a.scrollLeft,r.scrollLeft>0?s.$combinationHeadContainer.addClass("shtable__combination-head-container--over-design-right"):s.$combinationHeadContainer.removeClass("shtable__combination-head-container--over-design-right")})}function i(){q.view=g(),q.style=k()}function j(){var b=s.$defaultTable.find("thead tr"),c=s.$defaultTable.find("thead tr").clone(),e=0,f=0;c.each(function(c,g){var h=a(g).find("th");a(h.splice(d.depth,h.length)).remove(),f+=a(a(b[c]).find("th")[0]).outerHeight(),h.each(function(d,f){var g=a(f),h=a(a(b[c]).find("th")[d]),i=h.outerWidth(),j=h.outerHeight();e+=i,g.attr("height",j).attr("width",i).css("height",j).css("width",i)})}),s.$combinationHeadContainer.css("width",e).css("height",f),s.$combinationHeadTable.css("margin","0 !important"),s.$combinationHeadTable.find("thead").append(c),r.offsetTop<0?(s.$combinationHeadContainer.removeClass("shtable__combination-head-container--absolute"),s.$combinationHeadContainer.css("top",d.offsetTop).addClass("shtable__combination-head-container--fixed")):(s.$combinationHeadContainer.removeClass("shtable__combination-head-container--fixed"),s.$combinationHeadContainer.css("top",0).addClass("shtable__combination-head-container--absolute")),r.scrollLeft>0?s.$combinationHeadContainer.addClass("shtable__combination-head-container--over-design-right"):s.$combinationHeadContainer.removeClass("shtable__combination-head-container--over-design-right")}function k(){return[".shtable__combination-head-container {","  max-width: none;","  z-index: 1001;","  background: #ffffff;","}",".shtable__combination-head-container--absolute {","  position: absolute;","  left: 0;","  top: 0;","}",".shtable__combination-head-container--fixed {","  position: fixed;","}",".shtable__combination-head-container--over-design-right:before {",'  content: "";',"  display: block;","  position: absolute;","  top: 0;","  right: -2px;","  bottom: 0;","  width: 3px;","  background: #d5d5d5;","}",".shtable__combination-head-table {","  table-layout: fixed;","}"].join("")}function l(a,b){p[a]&&p[a].fire(b)}function m(a,b){p[a]&&p[a].addListener(b)}var n,o,p={renderedView:e.factory.createObserver(),renderedStyle:e.factory.createObserver()},q={view:null,style:null},r={offsetTop:1,offsetBottom:-1,scrollLeft:0},s=e.targetsStorage.foundTargets;return n=["combinationHeadContainerClasses","combinationHeadTableWrapClasses","combinationHeadTableClasses"],o={main:['<div class="shtable__combination-head-container {combinationHeadContainerClasses}">','  <div class="shtable__combination-head-table-wrap {combinationHeadTableWrapClasses}">','    <table class="shtable__combination-head-table {combinationHeadTableClasses}">',"      <thead></thead>","    </table>","  </div>","</div>"]},{init:function(){b()},addListener:function(a,b){m(a,b)}}}(),e.verticalHead=function(){function b(){i(),f(),h(),j(),c()}function c(){l("renderedView",q.view),l("renderedStyle",q.style)}function f(){s.$verticalHeadContainer=q.view,s.$verticalHeadTableWrap=q.view.find(".shtable__vertical-head-table-wrap"),s.$verticalHeadTable=q.view.find(".shtable__vertical-head-table")}function g(){var b=o.main.join(""),c=0,e=n.length;for(c=0;c<e;c++)b=b.replace("{"+n[c]+"}",d[n[c]]?d[n[c]]:"");return a(b)}function h(){e.eventManager.addListener("verticalScroll",function(a){r.offsetTop=a.offsetTop,r.offsetBottom=a.offsetBottom}),e.eventManager.addListener("horizontalScroll",function(a){r.scrollLeft=a.scrollLeft,r.scrollLeft>0?s.$verticalHeadContainer.addClass("shtable__vertical-head-container--over-design-right"):s.$verticalHeadContainer.removeClass("shtable__vertical-head-container--over-design-right")})}function i(){q.view=g(),q.style=k()}function j(){var b=s.$defaultTable.find("thead tr"),c=s.$defaultTable.find("tbody tr"),e=s.$defaultTable.find("thead tr").clone(),f=s.$defaultTable.find("tbody tr").clone(),g=0,h=0;e.each(function(c,e){var f=a(e).find("th");a(f.splice(d.depth,f.length)).remove(),h+=a(a(b[c]).find("th")[0]).outerHeight(),f.each(function(d,e){var f=a(e),h=a(a(b[c]).find("th")[d]),i=h.outerWidth(),j=h.outerHeight();g+=i,f.attr("height",j).attr("width",i).css("height",j).css("width",i)})}),f.each(function(b,e){var f=a(e).find("td");a(f.splice(d.depth,f.length)).remove(),h+=a(a(c[b]).find("td")[0]).outerHeight(),f.each(function(d,e){var f=a(e),g=a(a(c[b]).find("td")[d]),h=g.outerWidth(),i=g.outerHeight();f.attr("height",i).attr("width",h).css("height",i).css("width",h)})}),s.$verticalHeadContainer.css("width",g).css("height",h),s.$verticalHeadTable.css("margin","0 !important"),s.$verticalHeadTable.find("thead").append(e),s.$verticalHeadTable.find("tbody").append(f)}function k(){return[".shtable__vertical-head-container {","  max-width: none;","  position: absolute;","  left: 0;","  top: 0;","  z-index: 998;","  background: #ffffff;","}",".shtable__vertical-head-container--over-design-right:before {",'  content: "";',"  display: block;","  position: absolute;","  top: 0;","  right: -2px;","  bottom: 0;","  width: 3px;","  background: #d5d5d5;","}",".shtable__vertical-head-table {","  table-layout: fixed;","}"].join("")}function l(a,b){p[a]&&p[a].fire(b)}function m(a,b){p[a]&&p[a].addListener(b)}var n,o,p={renderedView:e.factory.createObserver(),renderedStyle:e.factory.createObserver()},q={view:null,style:null},r={offsetTop:1,offsetBottom:-1,scrollLeft:0},s=e.targetsStorage.foundTargets;return n=["verticalHeadContainerClasses","verticalHeadTableWrapClasses","verticalHeadTableClasses"],o={main:['<div class="shtable__vertical-head-container {verticalHeadContainerClasses}">','  <div class="shtable__vertical-head-table-wrap {verticalHeadTableWrapClasses}">','    <table class="shtable__vertical-head-table {verticalHeadTableClasses}">',"      <thead></thead>","      <tbody></tbody>","    </table>","  </div>","</div>"]},{init:function(){b()},addListener:function(a,b){m(a,b)}}}(),e.horizontalScroll=function(b,c){function d(){i(),f(),h(),j(),k(),e()}function e(){n("renderedView",s.view),n("renderedStyle",s.style)}function f(){u.$horizontalScrollContainer=s.view,u.$horizontalScrollContent=s.view.find(".shtable__horizontal-scroll-content")}function g(){var c=q.main.join(""),d=0,e=p.length;for(d=0;d<e;d++)c=c.replace("{"+p[d]+"}",b[p[d]]?b[p[d]]:"");return a(c)}function h(){c.eventManager.addListener("verticalScroll",function(a){var c=u.$window.height(),d=a.offsetBottom-2*b.horizontalScrollHeight<=0&&a.offsetTop+b.offsetTop+b.horizontalScrollHeight<c;t.offsetTop=a.offsetTop,t.offsetBottom=a.offsetBottom,u.$horizontalScrollContainer.css("visibility",d?"visible":"hidden"),u.$horizontalScrollContainer.css("height",d?b.horizontalScrollHeight:0)}),c.eventManager.addListener("horizontalScroll",function(a){var b=u.$defaultTableDefaultParent.width(),c=u.$defaultTable.width();t.scrollLeft=a.scrollLeft,u.$horizontalScrollContainer.scrollLeft(a.scrollLeft),b===t.defaultTableDefaultParentWidthLast&&c===t.defaultTableWidthLast||(u.$horizontalScrollContainer.css("width",b),u.$horizontalScrollContent.css("width",c))})}function i(){s.view=g(),s.style=m()}function j(){var a=u.$defaultTableDefaultParent.width(),c=u.$defaultTable.width(),d=u.$window.height(),e=t.offsetBottom-2*b.horizontalScrollHeight<=0&&t.offsetTop+b.offsetTop+b.horizontalScrollHeight<d;u.$horizontalScrollContainer.css("visibility",e?"visible":"hidden"),u.$horizontalScrollContainer.css("width",a).css("height",e?b.horizontalScrollHeight:0).scrollLeft(t.scrollLeft),u.$horizontalScrollContent.css("width",c)}function k(){u.$horizontalScrollContainer.on("scroll",c.helpers.debounce(l,8))}function l(){var a=u.$horizontalScrollContainer.scrollLeft();t.scrollLeft!==a&&(t.scrollLeft=a,u.$mainWrap.scrollLeft(a))}function m(){return[".shtable__horizontal-scroll-container {","  position: fixed;","  visibility: hidden;","  bottom: ",b.offsetBottom,"px;","  height: auto;","  overflow: hidden;","  overflow-x: scroll;","  z-index: 999;","  background: #ffffff;","  border-top: 1px solid #f2f2f1;","}",".shtable__horizontal-scroll-content {","  height: 1px;","}"].join("")}function n(a,b){r[a]&&r[a].fire(b)}function o(a,b){r[a]&&r[a].addListener(b)}var p,q,r={renderedView:c.factory.createObserver(),renderedStyle:c.factory.createObserver()},s={view:null,style:null},t={offsetTop:0,offsetBottom:0,scrollLeft:0,defaultTableDefaultParentWidthLast:0,defaultTableWidthLast:0},u=c.targetsStorage.foundTargets;return p=["horizontalScrollContainerClasses","horizontalScrollContentClasses"],q={main:['<div class="shtable__horizontal-scroll-container {horizontalScrollContainerClasses}">','  <div class="shtable__horizontal-scroll-content {horizontalScrollContentClasses}"></div>',"</div>"]},{init:function(){d()},addListener:function(a,b){o(a,b)}}}(d,e),function(){e.targetsStorage.init(c),e.main.init(),e.eventManager.init(),d.horizontalHead&&e.horizontalHead.init(),d.combinationHead&&e.combinationHead.init(),d.verticalHead&&e.verticalHead.init(),d.horizontalScroll&&e.horizontalScroll.init(),e.eventManager.emitLiteEvents()}(),{actions:{setOffsetTop:e.helpers.debounce(function(a){d.offsetTop=a,e.eventManager.emitMissEvents()},50),setOffsetBottom:e.helpers.debounce(function(a){d.offsetBottom=a,e.eventManager.emitMissEvents()},50),addListener:function(a,b){e.eventManager.addListener(a,b)}}}}}(jQuery);